# 穿越沙漠问题

## **题目:**

用一辆吉普车穿越1000公里的沙漠。吉普车的总装油量为500升，耗油率为1升/公里。由于沙漠中没有油库，必须先用这辆车在沙漠中建立临时油库。该吉普车以最少的耗油量穿越沙漠，应在什么地方建油库，以及各处的贮油量。



## 倒推法

### 假设：

1. 每次车都载满油
2. 到达油库时刚好没有油
3. 假设每次最优运输奇数次

### 解法：

1. 确保最后距离500米有一个油库有500 L油
2. 那倒数第二个油库设在哪会有最优解呢？
3. 可知至少得运两次，第一个油库才会有500 L油

#### 最优解法：

1. 设距离下一个油站为 $x$

2. 第一次放下油 $y$

3. 如图所示：

   ![jeep.drawio](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/typroa/3046/jeep.drawio.png)

#### 列方程：

$$500-2x-y=0$$ 

$$y+500-x=500$$ 

* 1式为第一次运油过程
* 2式为第二次运油过程

可解得，$x$ 与 $y$ 相同，为 ${\Large \mathbf{\frac{500}{3}} }  $

* 并可知储油为 $500 + 500 =1000$ (两次运输)
* 由此递推可知第三个站点的 $x$



### 代码实现

```cpp
#include<iostream>
#include<cstdio>

using namespace std;

void jeep(){
	int k = 1;
	int oil = 500; //每轮载油量
	int dis = 500; //距离从第一个站点开始计算
	do{
		printf("储油点 %d 距出发点距离 %d 储油量 %d\n",k,1000-dis,oil);
		k++; // 从第二个站点开始计算
		dis = dis + 500/(2*k-1); // 计算总距离 dis = dis + x
		oil = 500 * k; // 计算储油量
	}while(dis < 1000); // 超过1000则完成运油
	oil = 500*(k-1)+(1000-dis)*(2*k-1); 
	// 计算总储油量 
	// 第一次运输不算 
	// 由往返次数可知每个站点的油量 500 * n (n为往返次数)
	// 减去多余的距离，2 * k -1 为原本第k个站点需要的运油量
	printf("%d\n",oil);
	return;
}

int main()
{
	jeep();
	return 0;
}
```

输出结果：

```cpp
储油点 1 距出发点距离 500 储油量 500
储油点 2 距出发点距离 334 储油量 1000
储油点 3 距出发点距离 234 储油量 1500
储油点 4 距出发点距离 163 储油量 2000
储油点 5 距出发点距离 108 储油量 2500
储油点 6 距出发点距离 63 储油量 3000
储油点 7 距出发点距离 25 储油量 3500
3380
[Finished in 436ms]
```

